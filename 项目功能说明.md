# TrendRadar 项目功能说明

## 📋 项目简介

TrendRadar 是一个智能热点追踪与内容自动化生成系统，集成了信息抓取、文章生成、自动发布和智能评论等功能。通过 AI 技术实现从热点发现到内容创作再到平台发布的完整自动化流程。

---

## 🎯 核心功能模块

### 1. 信息抓取模块（Crawler）

**功能描述：**
- 从多个主流平台实时抓取热点新闻和热门话题
- 支持 11+ 个平台：知乎、微博、抖音、bilibili、百度热搜、今日头条、华尔街见闻、澎湃新闻、凤凰网、贴吧、财联社等
- 智能筛选和过滤，只抓取符合关键词配置的热点内容
- 支持多种推送模式：当日汇总、当前榜单、增量监控

**运行方式：**

```bash
# 方式1：直接运行爬虫模块
python crawler.py

# 方式2：通过调度器运行
python main/scheduler.py --mode crawler

# 方式3：通过主入口运行（完整流程）
python index.py
```

**配置文件：**
- `config/config.yaml` - 主配置文件（平台列表、推送设置等）
- `config/frequency_words.txt` - 关键词配置文件（设置监控的热点词汇）

**输出结果：**
- 生成 HTML 格式的热点报告（保存在 `output/` 目录）
- 支持推送到多种渠道：企业微信、飞书、钉钉、Telegram、邮件等

---

### 2. 文章生成模块（Create）

**功能描述：**
- 基于热点数据或指定主题自动生成高质量文章
- 支持自定义文章风格（专业、口语化等）
- 可控制文章字数和内容深度
- 支持多种内容类型：技术文章、博客文章、新闻评论等

**运行方式：**

```bash
# 方式1：运行示例脚本生成文章
python example_generate_article.py

# 方式2：通过调度器批量生成（按 topic.js 列表）
python main/scheduler_public.py --words 3000 --style 专业 --platform 技术博客

# 方式3：在代码中调用
from create.index import generate_article_by_topic

result = generate_article_by_topic(
    topic="前端Vue3与Vue2响应式区别和底层原理",
    requirements="详细讲解Vue2和Vue3的响应式原理...",
    platform="技术博客",
    content_type="技术文章",
    word_count=3000,
    style="专业"
)
```

**参数说明：**
- `topic`: 文章主题/标题
- `requirements`: 文章要求描述
- `platform`: 目标平台（影响文章风格）
- `content_type`: 内容类型
- `word_count`: 目标字数
- `style`: 文章风格（专业、口语化等）

**输出结果：**
- 生成的文章内容（Markdown 格式）
- 自动保存到 `output/articles/` 目录

---

### 3. 文章发布模块（Publish）

**功能描述：**
- 自动将生成的文章发布到博客平台
- 支持 Typecho 等主流博客平台
- 自动处理登录、编辑、发布等操作
- 支持批量发布到多个平台

**运行方式：**

```bash
# 方式1：运行示例脚本发布文章
python example_publish.py

# 方式2：通过调度器自动发布（创建+发布一体化）
python main/scheduler_public.py

# 方式3：在代码中调用
from public.index import publish_content

result = publish_content(
    content={
        'title': '文章标题',
        'content': '文章内容（Markdown格式）'
    },
    platform_ids=['typecho'],
    tags='标签1,标签2'
)
```

**配置文件：**
在 `config/config.yaml` 中配置发布平台信息：

```yaml
publish:
  enable: true
  default_platforms: "typecho"
  headless: false  # 是否使用无头模式（首次建议设为false，便于调试）
  wait_timeout: 10
  
  platforms:
    - id: "typecho"
      name: "Typecho博客"
      type: "typecho"
      login_url: "https://your-blog.com/admin/"
      write_url: "https://your-blog.com/admin/write-post.php"
      username: "your_username"
      password: "your_password"
      enabled: true
```

**输出结果：**
- 发布成功返回文章链接
- 发布失败返回错误信息

---

### 4. 评论模块（Comment）

**功能描述：**
- 自动在相关文章下发表评论
- 支持 CSDN 等平台
- 根据文章内容智能生成评论
- 支持自定义评论风格（口语化、专业等）

**运行方式：**

```bash
# 方式1：运行测试脚本
python test_csdn_comment.py

# 方式2：通过调度器运行（爬取+评论一体化）
python main/scheduler_comment.py --keyword "Vue3响应式原理" --comment-limit 3 --style 口语化

# 方式3：在代码中调用
from comment.index import comment_on_csdn

result = comment_on_csdn(
    keyword="前端Vue3与Vue2响应式区别和底层原理",
    comment_limit=3,  # 最多评论3篇文章
    style="口语化"     # 评论风格
)
```

**配置文件：**
在 `config/config.yaml` 中配置评论平台信息：

```yaml
comment:
  enable: true
  default_platforms: "csdn"
  headless: false
  wait_timeout: 10
  
  platforms:
    - id: "csdn"
      name: "CSDN"
      type: "csdn"
      username: "your_username"
      password: "your_password"
      enabled: true
```

**输出结果：**
- 返回评论结果统计（成功/失败数量）
- 每篇文章的评论内容和链接

---

## 🔄 完整工作流程

### 流程1：爬取 → 生成 → 发布

```bash
# 使用主调度器执行完整流程
python main/scheduler.py --mode create-publish --words 3000 --style 专业
```

**执行步骤：**
1. 从 `main/topic.js` 读取主题列表
2. 为每个主题生成文章
3. 自动发布到配置的博客平台

### 流程2：爬取 → 评论

```bash
# 执行爬取和评论工作流
python main/scheduler_comment.py --keyword "Vue3响应式原理" --comment-limit 3
```

**执行步骤：**
1. 执行爬虫模块，获取热点数据
2. 根据关键词搜索相关文章
3. 在相关文章下自动发表评论

### 流程3：完整自动化流程

```bash
# 执行完整工作流（爬取 → 生成 → 发布 → 评论）
python main/scheduler.py --mode full
```

---

## ⚙️ 配置说明

### 核心配置文件

1. **`config/config.yaml`** - 主配置文件
   - AI 模型配置（通义千问等）
   - 爬虫设置（请求间隔、代理等）
   - 推送模式配置
   - 平台列表配置
   - 发布平台配置
   - 评论平台配置

2. **`config/frequency_words.txt`** - 关键词配置
   - 设置监控的热点词汇
   - 支持普通词、必须词（+）、过滤词（!）、数量限制（@）等语法

3. **`main/topic.js`** - 主题列表文件
   - 定义要生成的文章主题
   - 格式：`top1: { title: "主题标题", desc: "主题描述" }`

### 环境要求

- Python 3.8+
- 已安装项目依赖（运行 `setup-windows.bat` 或 `setup-mac.sh`）
- 配置了 AI 模型 API Key（在 `config/config.yaml` 中）

---

## 📝 使用示例

### 示例1：生成单篇文章

```python
from create.index import generate_article_by_topic

result = generate_article_by_topic(
    topic="Python异步编程详解",
    requirements="详细介绍asyncio、协程、事件循环等概念",
    platform="技术博客",
    content_type="技术文章",
    word_count=3000,
    style="专业"
)

if result['success']:
    print("文章生成成功！")
    print(result['content'])
```

### 示例2：发布文章到博客

```python
from public.index import publish_content

result = publish_content(
    content={
        'title': 'Python异步编程详解',
        'content': '# Python异步编程详解\n\n...'
    },
    platform_ids=['typecho'],
    tags='Python,异步编程,技术'
)

if result['success_count'] > 0:
    print(f"发布成功！链接：{result['results'][0]['url']}")
```

### 示例3：在CSDN上评论

```python
from comment.index import comment_on_csdn

result = comment_on_csdn(
    keyword="Python异步编程",
    comment_limit=5,
    style="口语化"
)

print(f"成功评论 {result['success_count']} 篇文章")
```

---

## 🚀 快速开始

### 1. 安装依赖

**Windows:**
```bash
setup-windows.bat
```

**Mac/Linux:**
```bash
./setup-mac.sh
```

### 2. 配置 AI 模型

编辑 `config/config.yaml`，配置通义千问 API Key：

```yaml
ai:
  qwen:
    api_key: "your_api_key"
    enable: true
```

### 3. 配置发布平台

编辑 `config/config.yaml`，配置博客平台信息（见上文）

### 4. 运行功能

```bash
# 测试爬虫功能
python crawler.py

# 测试文章生成
python example_generate_article.py

# 测试文章发布
python example_publish.py

# 测试评论功能
python test_csdn_comment.py
```

---

## 📊 输出目录结构

```
output/
├── articles/              # 生成的文章（Markdown格式）
│   └── 20250115_120000_文章标题.md
├── 2025年01月15日/        # 按日期归档的爬虫数据
│   ├── html/
│   │   └── 当日汇总.html
│   └── txt/
│       └── 当日汇总.txt
└── index.html            # 最新热点报告（网页版）
```

---

## ⚠️ 注意事项

1. **首次使用建议关闭无头模式**
   - 在 `config/config.yaml` 中设置 `headless: false`
   - 可以观察浏览器操作过程，便于调试

2. **API 调用限制**
   - 注意 AI 模型的 API 调用频率限制
   - 建议在生成大量文章时添加延迟

3. **账号安全**
   - 不要在公开仓库中提交包含账号密码的配置文件
   - 建议使用环境变量或加密存储敏感信息

4. **评论频率控制**
   - 避免过于频繁的评论操作，可能触发平台限制
   - 建议设置合理的评论间隔

---

## 🔗 相关文档

- [README.md](README.md) - 项目主文档
- [workflow_README.md](workflow_README.md) - 工作流程详细说明
- [AI_USAGE.md](AI_USAGE.md) - AI 功能使用说明
- [PUBLISH_USAGE.md](PUBLISH_USAGE.md) - 发布功能使用说明

---

## 📞 技术支持

如有问题，请参考：
- GitHub Issues：提交问题反馈
- 项目文档：查看详细配置说明

---

**最后更新：** 2025-01-15






